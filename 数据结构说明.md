# Roomie 数据结构统一规范

## 用户数据字段

| 字段名 | 类型 | 可选值 | 说明 |
|--------|------|--------|------|
| name | string | - | 用户名字/昵称 |
| wechat_id | string | - | 微信号 |
| gender | string | "女" / "男" | 性别 |
| check_in | string | YYYY-MM-DD | 入住日期 |
| check_out | string | YYYY-MM-DD | 退房日期 |
| smoking | string | "否" / "是" | 是否吸烟 |
| schedule | string | "early" / "late" | 作息倾向：早睡鸟/夜猫子 |
| noise_in | string | "weak" / "normal" / "strong" | 抗噪等级：神经衰弱/普通玩家/雷打不动 |
| noise_out | string | "silent" / "mix" / "bass" | 出声分贝：寂静模式/混响模式/低音炮模式 |
| group_code | string | - | 群专属口令 |
| status | string | "active" / "matched" | 状态：等待中/已匹配 |
| created_at | number | timestamp | 创建时间戳 |

## 匹配逻辑

### 基础锁（必须完全相同）
- group_code：群口令
- gender：性别
- check_in：入住日期
- check_out：退房日期
- smoking：吸烟习惯
- schedule：作息倾向

### 睡眠锁（兼容性检查）
1. 如果用户A的 `noise_in == "weak"`（神经衰弱），则用户B的 `noise_out` 必须 == `"silent"`（寂静模式）
2. 如果用户B的 `noise_in == "weak"`，则用户A的 `noise_out` 必须 == `"silent"`
3. 如果用户A的 `noise_out == "bass"`（低音炮），则用户B的 `noise_in` 必须 == `"strong"`（雷打不动）
4. 如果用户B的 `noise_out == "bass"`，则用户A的 `noise_in` 必须 == `"strong"`

## 数据存储格式

```json
{
  "users": [
    {
      "name": "张三",
      "wechat_id": "zhangsan123",
      "gender": "男",
      "check_in": "2026-03-01",
      "check_out": "2026-03-03",
      "smoking": "否",
      "schedule": "late",
      "noise_in": "normal",
      "noise_out": "mix",
      "group_code": "abc123",
      "status": "active",
      "created_at": 1708099200
    }
  ]
}
```
